"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.parseWav = void 0;
const log_1 = require("../../log");
const parse_data_1 = require("./parse-data");
const parse_fmt_1 = require("./parse-fmt");
const parse_header_1 = require("./parse-header");
const parse_id3_1 = require("./parse-id3");
const parse_list_1 = require("./parse-list");
const parse_video_section_1 = require("./parse-video-section");
const parseWav = (state) => {
    const { iterator } = state;
    const insideVideoSection = state.videoSection.isInVideoSectionState(iterator);
    if (insideVideoSection === 'in-section') {
        return (0, parse_video_section_1.parseVideoSection)({ state });
    }
    const type = iterator.getByteString(4, false);
    log_1.Log.trace(state.logLevel, `Processing box type ${type}`);
    if (type === 'RIFF') {
        return (0, parse_header_1.parseHeader)({ state });
    }
    if (type === 'fmt') {
        return (0, parse_fmt_1.parseFmt)({ state });
    }
    if (type === 'data') {
        return (0, parse_data_1.parseData)({ state });
    }
    if (type === 'LIST') {
        return (0, parse_list_1.parseList)({ state });
    }
    if (type === 'id3') {
        return (0, parse_id3_1.parseId3)({ state });
    }
    throw new Error(`Unknown WAV box type ${type}`);
};
exports.parseWav = parseWav;

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.hasDurationFromWav = exports.getDurationFromWav = void 0;
const getDurationFromWav = (state) => {
    const structure = state.getWavStructure();
    const fmt = structure.boxes.find((b) => b.type === 'wav-fmt');
    if (!fmt) {
        throw new Error('Expected fmt box');
    }
    const dataBox = structure.boxes.find((b) => b.type === 'wav-data');
    if (!dataBox) {
        throw new Error('Expected data box');
    }
    const durationInSeconds = dataBox.dataSize / (fmt.sampleRate * fmt.blockAlign);
    return durationInSeconds;
};
exports.getDurationFromWav = getDurationFromWav;
const hasDurationFromWav = (state) => {
    try {
        return (0, exports.getDurationFromWav)(state);
    }
    catch (_a) {
        return false;
    }
};
exports.hasDurationFromWav = hasDurationFromWav;

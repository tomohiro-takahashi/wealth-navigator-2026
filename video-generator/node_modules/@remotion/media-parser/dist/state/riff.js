"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.riffSpecificState = void 0;
const riffSpecificState = () => {
    let avcProfile = null;
    let nextTrackIndex = 0;
    const profileCallbacks = [];
    const registerOnAvcProfileCallback = (callback) => {
        profileCallbacks.push(callback);
    };
    const onProfile = async (profile) => {
        avcProfile = profile;
        for (const callback of profileCallbacks) {
            await callback(profile);
        }
        profileCallbacks.length = 0;
    };
    return {
        getAvcProfile: () => {
            return avcProfile;
        },
        onProfile,
        registerOnAvcProfileCallback,
        getNextTrackIndex: () => {
            return nextTrackIndex;
        },
        incrementNextTrackIndex: () => {
            nextTrackIndex++;
        },
    };
};
exports.riffSpecificState = riffSpecificState;

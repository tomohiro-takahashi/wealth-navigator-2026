"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.eventLoopState = void 0;
const log_1 = require("../log");
const eventLoopState = (logLevel) => {
    let lastEventLoopBreak = Date.now();
    const eventLoopBreakIfNeeded = async () => {
        if (Date.now() - lastEventLoopBreak > 2000) {
            await new Promise((resolve) => {
                setTimeout(() => resolve(), 50);
            });
            log_1.Log.verbose(logLevel, '10ms event loop break');
            lastEventLoopBreak = Date.now();
        }
    };
    return { eventLoopBreakIfNeeded };
};
exports.eventLoopState = eventLoopState;

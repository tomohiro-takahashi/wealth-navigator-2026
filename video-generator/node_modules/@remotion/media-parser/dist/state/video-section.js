"use strict";
/**
 * Keeps track of in which section of the file the video is playing
 * Usually this section is in a different format and it is the only section
 * that can be read partially
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.videoSectionState = void 0;
const videoSectionState = () => {
    let videoSection = null;
    const setVideoSection = (section) => {
        videoSection = section;
    };
    const getVideoSection = () => {
        if (!videoSection) {
            throw new Error('No video section defined');
        }
        return videoSection;
    };
    const isInVideoSectionState = (iterator) => {
        if (!videoSection) {
            return 'no-section-defined';
        }
        const offset = iterator.counter.getOffset();
        if (offset >= videoSection.start &&
            offset < videoSection.start + videoSection.size) {
            return 'in-section';
        }
        return 'outside-section';
    };
    return {
        setVideoSection,
        getVideoSection,
        isInVideoSectionState,
    };
};
exports.videoSectionState = videoSectionState;
